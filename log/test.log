  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "customers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "last_name" varchar, "cpf" varchar, "phone" varchar, "email" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (5.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20190917205159)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-10-07 19:59:57.819076"], ["updated_at", "2019-10-07 19:59:57.819076"]]
  [1m[35m (4.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "customers"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "last_name", "cpf", "phone", "email", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2019-10-07 19:59:57.857916', '2019-10-07 19:59:57.857916', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("name", "last_name", "cpf", "phone", "email", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 'MyString', 'MyString', '2019-10-07 19:59:57.857916', '2019-10-07 19:59:57.857916', 298486374)[0m
  [1m[35m (4.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
CustomersControllerTest: test_should_destroy_customer
-----------------------------------------------------
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
Started DELETE "/customers/980190962" for 127.0.0.1 at 2019-10-07 16:59:57 -0300
Processing by CustomersController#destroy as JSON
  Parameters: {"id"=>"980190962", "customer"=>{}}
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Destroy (0.2ms)[0m  [1m[31mDELETE FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
No template found for CustomersController#destroy, rendering head :no_content
Completed 204 No Content in 20ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
CustomersControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/customers" for 127.0.0.1 at 2019-10-07 16:59:58 -0300
Processing by CustomersController#index as JSON
  Parameters: {"customer"=>{}}
  Rendering customers/index.json.jbuilder
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  Rendered customers/_customer.json.jbuilder (0.5ms)
  Rendered customers/_customer.json.jbuilder (0.2ms)
  Rendered customers/index.json.jbuilder (2.1ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
CustomersControllerTest: test_should_update_customer
----------------------------------------------------
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/customers/980190962" for 127.0.0.1 at 2019-10-07 16:59:58 -0300
Processing by CustomersController#update as JSON
  Parameters: {"customer"=>{"cpf"=>"MyString", "email"=>"MyString", "last_name"=>"MyString", "name"=>"MyString", "phone"=>"MyString"}, "id"=>"980190962"}
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering customers/show.json.jbuilder
  Rendered customers/_customer.json.jbuilder (0.3ms)
  Rendered customers/show.json.jbuilder (0.9ms)
Completed 200 OK in 4ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
CustomersControllerTest: test_should_create_customer
----------------------------------------------------
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
Started POST "/customers" for 127.0.0.1 at 2019-10-07 16:59:58 -0300
Processing by CustomersController#create as JSON
  Parameters: {"customer"=>{"cpf"=>"MyString", "email"=>"MyString", "last_name"=>"MyString", "name"=>"MyString", "phone"=>"MyString"}}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "last_name", "cpf", "phone", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "MyString"], ["last_name", "MyString"], ["cpf", "MyString"], ["phone", "MyString"], ["email", "MyString"], ["created_at", "2019-10-07 19:59:58.035589"], ["updated_at", "2019-10-07 19:59:58.035589"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering customers/show.json.jbuilder
  Rendered customers/_customer.json.jbuilder (0.2ms)
  Rendered customers/show.json.jbuilder (0.5ms)
Completed 201 Created in 3ms (Views: 1.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
CustomersControllerTest: test_should_show_customer
--------------------------------------------------
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/customers/980190962" for 127.0.0.1 at 2019-10-07 16:59:58 -0300
Processing by CustomersController#show as JSON
  Parameters: {"id"=>"980190962", "customer"=>{}}
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering customers/show.json.jbuilder
  Rendered customers/_customer.json.jbuilder (0.3ms)
  Rendered customers/show.json.jbuilder (0.6ms)
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (23.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "metron_test_db"[0m
Processing by Api::V1::ServicesController#create as HTML
  Parameters: {"description"=>"Com Tesoura", "duration"=>"1", "name"=>"Corte de Cabelo"}
Completed 400 Bad Request in 16ms (ActiveRecord: 0.0ms)
Processing by Api::V1::ServicesController#create as HTML
  Parameters: {"description"=>"Com Tesoura", "duration"=>"1", "name"=>"Corte de Cabelo"}
Completed 400 Bad Request in 2ms (ActiveRecord: 0.0ms)
Processing by Api::V1::ServicesController#create as HTML
  Parameters: {"service"=>{"description"=>"Com Tesoura", "duration"=>"1", "name"=>"Corte de Cabelo"}}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.0ms)
  [1m[35m (384.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (137.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5510789722610566275)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCustomers (20190917205159)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (178.9ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "name" character varying, "last_name" character varying, "cpf" character varying, "phone" character varying, "email" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190917205159"]]
  [1m[35m (15.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateServices (20191015194039)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (96.6ms)[0m  [1m[35mCREATE TABLE "services" ("id" bigserial primary key, "name" character varying, "description" character varying, "duration" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20191015194039"]]
  [1m[35m (19.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20191022195752)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (110.1ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "byte_size" bigint NOT NULL, "checksum" character varying NOT NULL, "created_at" timestamp NOT NULL)[0m
  [1m[35m (53.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_active_storage_blobs_on_key" ON "active_storage_blobs"  ("key")[0m
  [1m[35m (148.2ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (47.5ms)[0m  [1m[35mCREATE  INDEX  "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments"  ("blob_id")[0m
  [1m[35m (50.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_active_storage_attachments_uniqueness" ON "active_storage_attachments"  ("record_type", "record_id", "name", "blob_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20191022195752"]]
  [1m[35m (17.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2019-10-25 20:22:50.608879"], ["updated_at", "2019-10-25 20:22:50.608879"]]
  [1m[35m (40.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(5510789722610566275)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ServicesController#create as HTML
  Parameters: {"service"=>{"description"=>"Com Tesoura", "duration"=>"1", "name"=>"Corte de Cabelo"}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Create (0.6ms)[0m  [1m[32mINSERT INTO "services" ("name", "description", "duration", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Corte de Cabelo"], ["description", "Com Tesoura"], ["duration", 1], ["created_at", "2019-10-25 20:22:54.574165"], ["updated_at", "2019-10-25 20:22:54.574165"]]
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to 
Completed 500 Internal Server Error in 65ms (ActiveRecord: 41.7ms)
